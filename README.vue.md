# Kloudless File Explorer with Vue

Kloudless File Explorer for your Vue App. We provide:
- `Chooser`
  a button component that will launch the Chooser when clicked
- `createChooser`
  a HOC method that wraps your custom component to launch the Chooser
- `Saver`
  a button component that will launch the Saver when clicked
- `createSaver`
  a HOC method that wraps your custom component to launch the Saver
- `Dropzone`
  a Dropzone component that will launch the Chooser when clicked or
  launch the Saver when files are dropped.

Support Vue v2.

<!-- STORY -->

<!-- STORY HIDE START -->

[DEMO](https://kloudless.github.io/file-explorer/vue)

<!-- STORY HIDE END -->

## Table of contents

* [Installation](#installation)
* [How It Works](#how-it-works)
  * [Chooser](#chooser)
    * [Example](#example)
  * [createChooser](#createchooser)
    * [Example](#example-1)
  * [Saver](#saver)
    * [Example](#example-2)
  * [createSaver](#createsaver)
    * [Example](#example-3)
  * [Dropzone](#dropzone)
    * [Example](#example-4)
* [Props](#props)
* [Attributes](#attributes)
* [Events](#events)
* [Set/Get Global Option](#setget-global-option)
* [Custom CSS/style](#custom-cssstyle)
* [Testing](#testing)

## Installation

```shell
npm install @kloudless/file-explorer
```

## How It Works

### Chooser

A button component that wraps the [Chooser](https://github.com/Kloudless/file-explorer#chooser)
view of the File Explorer and will launch the Chooser when clicked.

#### Example

```html
<template>
  <chooser
    :options="{ 'app_id': 'KLOUDLESS_APP_ID' }"
    title="Click Chooser"
    @success="success"
    @addAccount="addAccount"
    @logout="logout" />
</template>

<script>
import { Chooser } from '@kloudless/file-explorer/vue';

export default {
  name: 'app',
  components: { Chooser },
  methods: {
    success(result) { console.log('"success" received', result) },
    addAccount(account) { console.log('"addAccount" received', account) },
    logout() { console.log('"logout" received') },
  },
}
</script>
```

### createChooser

A HOC method wraps your custom component to launch the Chooser.  
It will add a transparent component layer that will catch the click event from
the wrapped component and then launch the Chooser.  
All the properties except `options` passed to the HOC component will be passed
to the wrapped component.  
Also, all the events emitted from the wrapped component will be propagated.  
In addition, the HOC component will emit these [events](#events) that
are generated by the Chooser.  
A `click` event will be emitted even if the wrapped component doesn't emit one.

#### Example

First, wrap your custom button:
```javascript
import { createChooser } from '@kloudless/file-explorer/vue';
import MyButton from 'path/to/MyButton';

const MyChooserButton = createChooser(MyButton);

export default MyChooserButton;
```

Usage:
```html
<template>
  <my-chooser-button
    :options="{ 'app_id': 'KLOUDLESS_APP_ID' }"
    @click="click"
    @error="error"
    @success="success" />
</template>
```

### Saver

A button component that wraps the [Saver](https://github.com/Kloudless/file-explorer#saver)
view of the File Explorer and will launch the Saver when clicked.

#### Example

```html
<template>
  <saver
    :options="{ \
      'app_id': 'KLOUDLESS_APP_ID' \
      'files': [{ \
          'url': 'https://www.app.com/logo.png', \
          'name': 'logo.png' \
        }, \
      }"
    title="Click Saver"
    @success="success"
    @addAccount="addAccount"
    @logout="logout" />
</template>

<script>
import { Saver } from '@kloudless/file-explorer/vue';

export default {
  name: 'app',
  components: { Saver },
  methods: {
    success(result) { console.log('"success" received', result) },
    addAccount(account) { console.log('"addAccount" received', account) },
    logout() { console.log('"logout" received') },
  },
}
</script>
```

### createSaver

A HOC method that wraps your custom component to launch the Saver.  
It will add a transparent component layer that will catch the click event from
the wrapped component and then launch the Saver.  
All the properties except `options` passed to the HOC component will be passed
to the wrapped component.  
Also, all the events emitted from the wrapped component will be propagated.  
In addition, the HOC component will emit these [events](#events) that
are generated by the Saver.  
A `click` event will be emitted even if the wrapped component doesn't emit one.

#### Example

First, wrap your custom button:
```javascript
import { createSaver } from '@kloudless/file-explorer/vue';
import MyButton from 'path/to/MyButton';

const MySaverButton = createSaver(MyButton);

export default MySaverButton
```

Usage:
```html
<template>
  <my-saver-button
    :options="{ \
      'app_id': 'KLOUDLESS_APP_ID' \
      'files': [{ \
          'url': 'https://www.app.com/logo.png', \
          'name': 'logo.png' \
        }, \
      }"
    title="Click Saver"
    @success="success"
    @addAccount="addAccount"
    @logout="logout" />
</template>
```

### Dropzone

A [Dropzone](https://github.com/Kloudless/file-explorer#dropzone) component that
will launch the Chooser when clicked or launch the Saver when files are dropped.

#### Example

```html
<template>
  <dropzone
    :options="{ 'app_id': 'KLOUDLESS_APP_ID' }"
    @success="success"
    @addAccount="addAccount"
    @logout="logout" />
</template>

<script>
import { Dropzone } from '@kloudless/file-explorer/vue';

export default {
  name: 'app',
  components: { Dropzone },
  methods: {
    success(result) { console.log('"success" received', result) },
    addAccount(account) { console.log('"addAccount" received', account) },
    logout() { console.log('"logout" received') },
  },
}
</script>
```

## Props

- `options` _(Required)_  
  An object used to configure Chooser, Saver, Dropzone or components created by
  HOC.
  Please refer to [Options](https://github.com/Kloudless/file-explorer#options)
  for detail.
- `title` _(Optional)_   
  The text shown on the button for `Chooser` or `Saver`.
  Default value: `Save a file` for `Saver`; `Choose a file` for `Chooser`.

## Attributes

Here are useful DOM element attributes you can use.

- `class`
  CSS class name
- `style`
- `disabled`
  `true` to disabled component

## Events

Support all the events listed in [Events](https://github.com/Kloudless/file-explorer#events).

In addition, we support `click` event:
- `click`
  Emitted when the component clicked.

## Set/Get Global Option

Please refer to [File Explorer Methods](https://github.com/Kloudless/file-explorer#methods)
for detailed information about `fileExplorer.setGlobalOptions()` and
`fileExplorer.getGlobalOptions()`.

## Custom CSS/style

By default, we don't apply any CSS and style for the components.
You have to include CSS files and set `class` or `style` props on your own.

## Testing

First, install dependencies: (Only needs to be done once)
```shell
$ npm install --prefix storybook-vue/
```

Then, start up testing server:
```shell
$ npm run storybook:vue
```

Or you can specify your Kloudless APP ID:

```shell
$ STORYBOOK_KLOUDLESS_APP_ID=APP_ID npm run storybook:vue
```